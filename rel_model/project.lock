data:
  cmd: python -m weasel run data
  script:
    - python ./scripts/parse_data.py assets/annotations.jsonl data/train.spacy data/dev.spacy
  deps:
    - path: assets/annotations.jsonl
      md5: 7e7b983c978a84ca7e129bb4e35c4094
  outs:
    - path: data/train.spacy
      md5: 1cf887af56899b9c45bd2f165cd641af
    - path: data/dev.spacy
      md5: 167252eba3d4ca5ef42ce09f659e4909
train_cpu:
  cmd: python -m weasel run train_cpu
  script:
    - python -m spacy train configs/rel_tok2vec.cfg --output training --paths.train
      data/train.spacy --paths.dev data/dev.spacy -c ./scripts/custom_functions.py
  deps:
    - path: data/train.spacy
      md5: 1cf887af56899b9c45bd2f165cd641af
    - path: data/dev.spacy
      md5: 167252eba3d4ca5ef42ce09f659e4909
  outs:
    - path: training/model-best
      md5: a88474271df687f3a6b39807ae3a06e0
evaluate:
  cmd: python -m weasel run evaluate
  script:
    - python ./scripts/evaluate.py training/model-best data/dev.spacy False
  deps:
    - path: training/model-best
      md5: d069343fa4acdd032681b25503b5a7ed
    - path: data/dev.spacy
      md5: null
  outs: []
